---
// BaseLayout.astro - Main layout wrapper for all pages
interface Props {
  title?: string;
  description?: string;
}

const {
  title = 'Learn Mermaid Interactive - Master Diagram Syntax',
  description = 'Interactive learning tool for Mermaid diagrams. Explore 14+ chart types with live examples, code editors, and instant previews.'
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="keywords" content="mermaid, diagrams, flowchart, sequence diagram, gantt, learning, interactive, tutorial" />
    <meta name="author" content="Learn Mermaid Interactive" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <!-- Title -->
    <title>{title}</title>

    <!-- Global Styles -->
    <link rel="stylesheet" href="/src/styles/global.css" />

    <!-- Mermaid.js Library -->
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

      // Initialize Mermaid with custom configuration
      mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        securityLevel: 'loose',
        fontFamily: 'Arial, sans-serif',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis'
        },
        sequence: {
          useMaxWidth: true,
          diagramMarginX: 50,
          diagramMarginY: 10,
          actorMargin: 50,
          width: 150,
          height: 65,
          boxMargin: 10,
          boxTextMargin: 5,
          noteMargin: 10,
          messageMargin: 35
        },
        gantt: {
          titleTopMargin: 25,
          barHeight: 20,
          barGap: 4,
          topPadding: 50,
          leftPadding: 75,
          gridLineStartPadding: 35,
          fontSize: 11,
          numberSectionStyles: 4,
          axisFormat: '%Y-%m-%d'
        }
      });

      // Make mermaid globally accessible
      window.mermaid = mermaid;
    </script>
  </head>

  <body class="min-h-screen bg-gray-50">
    <!-- Main content slot -->
    <slot />

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
      <div class="container-custom text-center">
        <p class="text-gray-300">
          &copy; {new Date().getFullYear()} Learn Mermaid Interactive.
          Built with <a href="https://astro.build" class="text-blue-400 hover:text-blue-300">Astro</a>,
          <a href="https://tailwindcss.com" class="text-blue-400 hover:text-blue-300">Tailwind CSS</a>, and
          <a href="https://mermaid.js.org" class="text-blue-400 hover:text-blue-300">Mermaid.js</a>
        </p>
        <p class="text-gray-400 text-sm mt-2">
          Open source and available on
          <a href="https://github.com/kushanparikh/learn-mermaid-interactive" class="text-blue-400 hover:text-blue-300">GitHub</a>
        </p>
      </div>
    </footer>
  </body>
</html>
